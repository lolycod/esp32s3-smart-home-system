# 电机/舵机控制问题调试步骤

## 请按以下步骤操作，并把每一步的结果发给我：

### 第1步：检查ESP32是否收到WebSocket消息
1. 打开ESP32串口监视器
2. 在网页上点击"风扇开启"
3. **查看ESP32串口是否打印了**：
   - `收到数据: {type:"message",...,data:"MOTOR_XX"}`
   - **如果有这条日志，说明ESP32收到了消息**
   - **如果没有这条日志，说明消息没到达ESP32**

### 第2步：检查ESP32是否解析了命令
继续看ESP32串口，应该看到：
- `处理命令: MOTOR_80`
- `[OK] 风扇转速设置为 80%`

**如果看到了，说明命令已处理**
**如果看不到，说明解析失败**

### 第3步：检查服务器是否转发了消息
查看WebSocket服务器终端（运行 node server.js 的窗口），应该看到：
- `📨 消息处理完成: 类型=message, 发送者=xxx, 转发=X个客户端`

**如果转发数=0，说明ESP32没连接到服务器**

### 第4步：检查网页控制台
按 F12 打开浏览器控制台，点击"风扇开启"，应该看到：
- `📤 发送消息: {type: "message", data: "MOTOR_XX"}`
- `✓ 发送命令: MOTOR_XX`

---

## 指示灯为什么能控制？

**请对比指示灯和电机的控制流程：**
- 点击"指示灯开启"，查看ESP32串口打印
- 点击"风扇开启"，查看ESP32串口打印
- **告诉我两者的日志有什么不同**

---

## 请把以下信息全部发给我：

1. ESP32串口完整日志（从开机到点击控制按钮）
2. WebSocket服务器终端完整日志
3. 网页浏览器控制台（F12）完整日志
4. 指示灯能控制，但电机/舵机不能控制的具体现象描述

**有了这些信息，我就能精确定位问题！**
